<!DOCTYPE html>

<html class="" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">








<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Spring," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæ·±å…¥åˆ†æå’Œå­¦ä¹ äº† BeanFactoryPostProcessor ï¼Œä¸»ä½“æ˜¯ BeanFactory çš„åå¤„ç†å™¨ï¼Œè¿™æ¬¡æ¥å­¦ä¹ ä¸»ä½“æ˜¯ Bean çš„åå¤„ç†å™¨ï¼šBeanPostProcessorã€‚ å®šä¹‰ï¼šå®ƒä¹Ÿæ˜¯ Spring å¯¹å¤–æä¾›çš„æ¥å£ï¼Œç”¨æ¥ç»™ç”¨æˆ·æ‰©å±•è‡ªå®šä¹‰çš„åŠŸèƒ½ã€‚æ‰§è¡Œçš„æ—¶æœºåœ¨ bean å®ä¾‹åŒ–é˜¶æ®µå‰å æœ¬ç¯‡æ€è·¯ï¼š  BeanPostProcessor å®šä¹‰ å¦‚ä½•ä½¿ç”¨ ä»£ç å®ç°åˆ†æ">
<meta name="keywords" content="Spring">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Spring æºç å­¦ä¹ (ä¸ƒ)æ‰©å±•åŠŸèƒ½ ä¸‹ç¯‡">
<meta property="og:url" content="http://yoursite.com/2019/06/30/spring/2019-06-30-spring-analysis-note-7/index.html">
<meta property="og:site_name" content="JingQ">
<meta property="og:description" content="åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæ·±å…¥åˆ†æå’Œå­¦ä¹ äº† BeanFactoryPostProcessor ï¼Œä¸»ä½“æ˜¯ BeanFactory çš„åå¤„ç†å™¨ï¼Œè¿™æ¬¡æ¥å­¦ä¹ ä¸»ä½“æ˜¯ Bean çš„åå¤„ç†å™¨ï¼šBeanPostProcessorã€‚ å®šä¹‰ï¼šå®ƒä¹Ÿæ˜¯ Spring å¯¹å¤–æä¾›çš„æ¥å£ï¼Œç”¨æ¥ç»™ç”¨æˆ·æ‰©å±•è‡ªå®šä¹‰çš„åŠŸèƒ½ã€‚æ‰§è¡Œçš„æ—¶æœºåœ¨ bean å®ä¾‹åŒ–é˜¶æ®µå‰å æœ¬ç¯‡æ€è·¯ï¼š  BeanPostProcessor å®šä¹‰ å¦‚ä½•ä½¿ç”¨ ä»£ç å®ç°åˆ†æ">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://img.sevenyuan.cn/ManausBasin_ZH-CN4303809335_1920x1080.jpg">
<meta property="og:image" content="http://img.sevenyuan.cn/context_extend_method_list.png">
<meta property="og:updated_time" content="2019-07-21T03:23:14.069Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Spring Spring æºç å­¦ä¹ (ä¸ƒ)æ‰©å±•åŠŸèƒ½ ä¸‹ç¯‡">
<meta name="twitter:description" content="åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæ·±å…¥åˆ†æå’Œå­¦ä¹ äº† BeanFactoryPostProcessor ï¼Œä¸»ä½“æ˜¯ BeanFactory çš„åå¤„ç†å™¨ï¼Œè¿™æ¬¡æ¥å­¦ä¹ ä¸»ä½“æ˜¯ Bean çš„åå¤„ç†å™¨ï¼šBeanPostProcessorã€‚ å®šä¹‰ï¼šå®ƒä¹Ÿæ˜¯ Spring å¯¹å¤–æä¾›çš„æ¥å£ï¼Œç”¨æ¥ç»™ç”¨æˆ·æ‰©å±•è‡ªå®šä¹‰çš„åŠŸèƒ½ã€‚æ‰§è¡Œçš„æ—¶æœºåœ¨ bean å®ä¾‹åŒ–é˜¶æ®µå‰å æœ¬ç¯‡æ€è·¯ï¼š  BeanPostProcessor å®šä¹‰ å¦‚ä½•ä½¿ç”¨ ä»£ç å®ç°åˆ†æ">
<meta name="twitter:image" content="http://img.sevenyuan.cn/ManausBasin_ZH-CN4303809335_1920x1080.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'JingQ'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/06/30/spring/2019-06-30-spring-analysis-note-7/"/>





  <title>Spring Spring æºç å­¦ä¹ (ä¸ƒ)æ‰©å±•åŠŸèƒ½ ä¸‹ç¯‡ | JingQ</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">JingQ</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-javatech">
          <a href="http://www.justdojava.com/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Java Geek Tech
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/30/spring/2019-06-30-spring-analysis-note-7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JingQ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://img.sevenyuan.cn/%E5%B0%8F%E7%86%8A%E7%8C%AB.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JingQ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Spring Spring æºç å­¦ä¹ (ä¸ƒ)æ‰©å±•åŠŸèƒ½ ä¸‹ç¯‡</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-06-30T14:06:00+08:00">
                2019-06-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i> æ¸¸è§ˆ
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>æ¬¡
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="http://img.sevenyuan.cn/ManausBasin_ZH-CN4303809335_1920x1080.jpg" alt=""></p>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæ·±å…¥åˆ†æå’Œå­¦ä¹ äº† <code>BeanFactoryPostProcessor</code> ï¼Œä¸»ä½“æ˜¯ <code>BeanFactory</code> çš„åå¤„ç†å™¨ï¼Œè¿™æ¬¡æ¥å­¦ä¹ ä¸»ä½“æ˜¯ <code>Bean</code> çš„åå¤„ç†å™¨ï¼š<code>BeanPostProcessor</code>ã€‚</p>
<p><strong>å®šä¹‰ï¼šå®ƒä¹Ÿæ˜¯ <code>Spring</code> å¯¹å¤–æä¾›çš„æ¥å£ï¼Œç”¨æ¥ç»™ç”¨æˆ·æ‰©å±•è‡ªå®šä¹‰çš„åŠŸèƒ½ã€‚æ‰§è¡Œçš„æ—¶æœºåœ¨ <code>bean</code> å®ä¾‹åŒ–é˜¶æ®µå‰å</strong></p>
<p>æœ¬ç¯‡æ€è·¯ï¼š</p>
<ol>
<li><code>BeanPostProcessor</code> å®šä¹‰</li>
<li>å¦‚ä½•ä½¿ç”¨</li>
<li>ä»£ç å®ç°åˆ†æ</li>
<li>ä»‹ç»å‰©ä½™çš„æ‰©å±•åŠŸèƒ½</li>
</ol>
<a id="more"></a>
<hr>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¸ <code>BeanFactoryPostProcessor</code> ä¸åŒçš„æ˜¯ï¼Œ<code>BeanFactoryPostProcessor</code> çš„æ³¨å†Œå’Œæ‰§è¡Œéƒ½åœ¨åŒä¸€ä¸ªæ–¹æ³•å†…ï¼Œè€Œ <code>BeanPostProcessor</code> åˆ†å¼€ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†ä¸º<strong>æ³¨å†Œ</strong>å’Œ<strong>è°ƒç”¨</strong>ä¸¤ä¸ªæ­¥éª¤ã€‚</p>
<p><strong>å¸¸è§„çš„ <code>BeanFactory</code> ä¸­æ˜¯æ²¡æœ‰å®ç°åå¤„ç†å™¨çš„è‡ªåŠ¨æ³¨å†Œï¼Œæ‰€ä»¥åœ¨è°ƒç”¨çš„æ—¶å€™æ²¡æœ‰è¿›è¡Œæ‰‹åŠ¨æ³¨å†Œæ˜¯æ— æ³•ä½¿ç”¨çš„ï¼Œä½†åœ¨ <code>ApplicationContext</code> ä¸­æ·»åŠ äº†è‡ªåŠ¨æ³¨å†ŒåŠŸèƒ½ï¼ˆåœ¨è¿™ä¸ª <code>registerBeanPostProcessors</code> æ–¹æ³•ä¸­ï¼‰ï¼Œæœ€ååœ¨ <code>bean</code> å®ä¾‹åŒ–æ—¶æ‰§è¡Œ <code>BeanPostProcessor</code> å¯¹åº”çš„æ–¹æ³•ã€‚</strong></p>
<p>æœ¬æ¬¡ä¸»è¦ä»‹ç» <code>BeanPostProcessor</code>ï¼ŒåŒæ—¶ä¹Ÿä¼šå°†å‰©ä¸‹çš„ <code>context</code> æ‰©å±•åŠŸèƒ½ä¸€èµ·å­¦ä¹ ~</p>
<hr>
<h1 id="BeanPostProcessor"><a href="#BeanPostProcessor" class="headerlink" title="BeanPostProcessor"></a>BeanPostProcessor</h1><p>ç»è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„å­¦ä¹ ï¼Œåº”è¯¥å¯¹ <code>bean</code> çš„åå¤„ç†ç†è§£èµ·æ¥æ›´é¡ºåˆ©ï¼Œä¸‹é¢ç›´å¥”ä¸»é¢˜ï¼Œæ¥çœ‹ä¸‹å®ƒæ˜¯å¦‚ä½•ä½¿ç”¨å’Œç»“åˆæºç åˆ†æ</p>
<hr>
<h2 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h2><h3 id="æ–°å»ºä¸€ä¸ª-bean-åå¤„ç†å™¨"><a href="#æ–°å»ºä¸€ä¸ª-bean-åå¤„ç†å™¨" class="headerlink" title="æ–°å»ºä¸€ä¸ª bean åå¤„ç†å™¨"></a>æ–°å»ºä¸€ä¸ª bean åå¤„ç†å™¨</h3><p>è¿™ä¸ªåå¤„ç†å™¨éœ€è¦å¼•ç”¨ <code>InstantiationAwareBeanPostProcessor</code> æ¥å£ï¼ˆå®é™…ç»§æ‰¿è‡ª <code>BeanPostProcessor</code>ï¼‰ï¼Œç„¶åé‡è½½ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarBeanPostProcessor</span> <span class="keyword">implements</span> <span class="title">InstantiationAwareBeanPostProcessor</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</div><div class="line">		<span class="comment">// è¿™é‡Œæ²¡æœ‰åŒºåˆ† bean ç±»å‹ï¼Œåªæ˜¯ç”¨æ¥æµ‹è¯•æ‰“å°çš„é¡ºåºå’Œæ—¶é—´</span></div><div class="line">		System.out.println(<span class="string">"Bean name : "</span> + beanName + <span class="string">", before Initialization, time : "</span> + System.currentTimeMillis());</div><div class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</div><div class="line">		System.out.println(<span class="string">"Bean name : "</span> + beanName + <span class="string">", after Initialization, time : "</span> + System.currentTimeMillis());</div><div class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h3 id="åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ-bean-post-processor-xml"><a href="#åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ-bean-post-processor-xml" class="headerlink" title="åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ bean-post-processor.xml"></a>åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ bean-post-processor.xml</h3><p>åœ¨é…ç½®æ–‡ä»¶é…ç½®æˆ‘ä»¬å†™çš„è‡ªå®šä¹‰åå¤„ç†å™¨å’Œä¸¤ä¸ªæ™®é€š <code>bean</code>ï¼Œç”¨æ¥æµ‹è¯•æ‰“å°æ—¶é—´å’Œé¡ºåº</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- beanPostProcessor --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"carPostProcessor"</span> <span class="attr">class</span>=<span class="string">"context.bean.CarBeanPostProcessor"</span>/&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!--ç”¨ä»¥ä¸‹ä¸¤ä¸ª bean è¿›è¡Œæµ‹è¯•æ‰“å°æ—¶é—´å’Œé¡ºåº--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"car"</span> <span class="attr">class</span>=<span class="string">"base.factory.bean.Car"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"price"</span> <span class="attr">value</span>=<span class="string">"10000"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"brand"</span> <span class="attr">value</span>=<span class="string">"å¥”é©°"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"book"</span> <span class="attr">class</span>=<span class="string">"domain.ComplexBook"</span>/&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<hr>
<h3 id="å¯åŠ¨ä»£ç å’Œæ‰“å°ç»“æœ"><a href="#å¯åŠ¨ä»£ç å’Œæ‰“å°ç»“æœ" class="headerlink" title="å¯åŠ¨ä»£ç å’Œæ‰“å°ç»“æœ"></a>å¯åŠ¨ä»£ç å’Œæ‰“å°ç»“æœ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarBeanPostProcessorBootstrap</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"factory.bean/bean-post-processor.xml"</span>);</div><div class="line">		Car car = (Car) context.getBean(<span class="string">"car"</span>);</div><div class="line">		ComplexBook book = (ComplexBook) context.getBean(<span class="string">"book"</span>);</div><div class="line">		System.out.println(car);</div><div class="line">		System.out.println(book);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Bean name : car, before Initialization, time : 1560772863996</div><div class="line">Bean name : car, after Initialization, time : 1560772863996</div><div class="line">Bean name : book, before Initialization, time : 1560772863999</div><div class="line">Bean name : book, after Initialization, time : 1560772863999</div><div class="line">Car&#123;maxSpeed=0, brand=&apos;å¥”é©°&apos;, price=10000.0&#125;</div><div class="line">domain.ComplexBook@77be656f</div></pre></td></tr></table></figure>
<p>ä»è¾“å‡ºæ¥å£çœ‹å‡ºï¼Œæ‰“å°é¡ºåºæ˜¯å…ˆæ¡†æ¶å†…éƒ¨ï¼Œå†åˆ°åº”ç”¨å±‚ï¼Œæ¡†æ¶å†…éƒ¨ä¸­ï¼Œåœ¨é¡ºåºå®ä¾‹åŒ–æ¯ä¸ª <code>bean</code> æ—¶ï¼Œå‰é¢ä¹Ÿæåˆ°<strong>æ‰§è¡Œæ—¶æœºï¼šå…ˆæ‰§è¡Œ <code>postProcessBeforeInitialization</code> æ–¹æ³•ï¼Œç„¶åå®ä¾‹åŒ– <code>bean</code> åï¼Œæ‰§è¡Œ <code>postProcessAfterInitialization</code>ã€‚</strong></p>
<p>æ‰€ä»¥æˆ‘ä»¬é‡è½½çš„ä¸¤ä¸ªæ¥å£æŒ‰ç…§å‰åé¡ºåºæ‰“å°å‡ºæ¥äº†~</p>
<hr>
<h2 id="æ³¨å†Œ-BeanPostProcessor"><a href="#æ³¨å†Œ-BeanPostProcessor" class="headerlink" title="æ³¨å†Œ BeanPostProcessor"></a>æ³¨å†Œ BeanPostProcessor</h2><p>ä¸Šé¢ä»‹ç»äº†ä½¿ç”¨ä¾‹å­ï¼Œåº”è¯¥ä¸éš¾ç†è§£ï¼Œæ¥ç€æ¥çœ‹ä¸‹æºç æ³¨å†Œçš„æ–¹æ³•ï¼š</p>
<blockquote>
<p>org.springframework.context.support.AbstractApplicationContext#registerBeanPostProcessors</p>
</blockquote>
<p>å®é™…å§”æ‰˜ç»™äº† <code>PostProcessorRegistrationDelegate.registerBeanPostProcessors(beanFactory, this);</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">registerBeanPostProcessors</span><span class="params">(</span></span></div><div class="line"><span class="function"><span class="params">			ConfigurableListableBeanFactory beanFactory, AbstractApplicationContext applicationContext)</span> </span>&#123;</div><div class="line">		<span class="comment">// æ³¨é‡Š 7.2 ä»æ³¨å†Œè¡¨ä¸­å–å‡º class ç±»å‹ä¸º BeanPostProcessor çš„ bean åç§°åˆ—è¡¨</span></div><div class="line">		String[] postProcessorNames = beanFactory.getBeanNamesForType(BeanPostProcessor.class, <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"></div><div class="line">		<span class="keyword">int</span> beanProcessorTargetCount = beanFactory.getBeanPostProcessorCount() + <span class="number">1</span> + postProcessorNames.length;</div><div class="line">		beanFactory.addBeanPostProcessor(<span class="keyword">new</span> BeanPostProcessorChecker(beanFactory, beanProcessorTargetCount));</div><div class="line">		<span class="comment">// å°†å¸¦æœ‰ æƒé™é¡ºåºã€é¡ºåºå’Œå…¶ä½™çš„ beanPostProcessor åˆ†å¼€</span></div><div class="line">		List&lt;BeanPostProcessor&gt; priorityOrderedPostProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">		<span class="comment">// ç±»å‹æ˜¯ MergedBeanDefinitionPostProcessor</span></div><div class="line">		List&lt;BeanPostProcessor&gt; internalPostProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">		List&lt;String&gt; orderedPostProcessorNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">		List&lt;String&gt; nonOrderedPostProcessorNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">		<span class="keyword">for</span> (String ppName : postProcessorNames) &#123;</div><div class="line">            <span class="comment">// åˆ†ç±»ï¼Œæ·»åŠ åˆ°å¯¹åº”æ•°ç»„ä¸­</span></div><div class="line">			...</div><div class="line">		&#125;</div><div class="line">		<span class="comment">// é¦–å…ˆï¼Œæ³¨å†Œå®ç°äº† PriorityOrdered æ¥å£çš„ bean åå¤„ç†å™¨</span></div><div class="line">		sortPostProcessors(priorityOrderedPostProcessors, beanFactory);</div><div class="line">		registerBeanPostProcessors(beanFactory, priorityOrderedPostProcessors);</div><div class="line">		<span class="comment">// ä¸‹ä¸€æ­¥ï¼Œæ³¨å†Œå®ç°äº† Ordered æ¥å£çš„ bean åå¤„ç†å™¨</span></div><div class="line">		List&lt;BeanPostProcessor&gt; orderedPostProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;(orderedPostProcessorNames.size());</div><div class="line">		<span class="keyword">for</span> (String ppName : orderedPostProcessorNames) &#123;</div><div class="line">			BeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);</div><div class="line">			orderedPostProcessors.add(pp);</div><div class="line">			<span class="keyword">if</span> (pp <span class="keyword">instanceof</span> MergedBeanDefinitionPostProcessor) &#123;</div><div class="line">				internalPostProcessors.add(pp);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		sortPostProcessors(orderedPostProcessors, beanFactory);</div><div class="line">		registerBeanPostProcessors(beanFactory, orderedPostProcessors);</div><div class="line">		<span class="comment">// ç°åœ¨ï¼Œæ³¨å†Œå¸¸è§„ bean åå¤„ç†å™¨ï¼Œå…¶å®å°±æ˜¯ä¸å¸¦é¡ºåº</span></div><div class="line">		List&lt;BeanPostProcessor&gt; nonOrderedPostProcessors = <span class="keyword">new</span> ArrayList&lt;&gt;(nonOrderedPostProcessorNames.size());</div><div class="line">		<span class="keyword">for</span> (String ppName : nonOrderedPostProcessorNames) &#123;</div><div class="line">			BeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);</div><div class="line">			nonOrderedPostProcessors.add(pp);</div><div class="line">			<span class="keyword">if</span> (pp <span class="keyword">instanceof</span> MergedBeanDefinitionPostProcessor) &#123;</div><div class="line">				internalPostProcessors.add(pp);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		registerBeanPostProcessors(beanFactory, nonOrderedPostProcessors);</div><div class="line">		<span class="comment">// æœ€åï¼Œé‡æ–°æ³¨å†Œ MergedBeanDefinitionPostProcessor ç±»å‹çš„åå¤„ç†å™¨</span></div><div class="line">		<span class="comment">// çœ‹èµ·æ¥æ˜¯é‡å¤æ³¨å†Œäº†ï¼Œä½†æ˜¯æ¯æ¬¡æ³¨å†Œè°ƒç”¨çš„åº•å±‚æ–¹æ³•éƒ½ä¼šå…ˆç§»é™¤å·²å­˜åœ¨çš„ beanPostProcessorï¼Œç„¶åå†åŠ è¿›å»ï¼Œæœ€åè¿˜æ˜¯ä¿å­˜å”¯ä¸€</span></div><div class="line">		sortPostProcessors(internalPostProcessors, beanFactory);</div><div class="line">		registerBeanPostProcessors(beanFactory, internalPostProcessors);</div><div class="line">		<span class="comment">// æ·»åŠ  ApplicationContext æ¢æµ‹å™¨</span></div><div class="line">		beanFactory.addBeanPostProcessor(<span class="keyword">new</span> ApplicationListenerDetector(applicationContext));</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p>è·Ÿä¹‹å‰çš„ <code>BeanFactoryPostProcessor</code> å¤„ç†æ˜¯ä¸æ˜¯å¾ˆç›¸ä¼¼ï¼Œä¹Ÿæ˜¯è¿›è¡Œåˆ†ç±»ï¼Œå°†å¸¦æœ‰æƒé‡é¡ºåºã€é¡ºåºå’Œæ™®é€š <code>BeanPostProcessor</code> æ·»åŠ åˆ°å¯¹åº”çš„åˆ—è¡¨åï¼Œç„¶åæ’åºï¼Œç»Ÿä¸€æ³¨å†Œåˆ° <code>beanPostProcessors</code> åˆ—è¡¨æœ«å°¾ã€‚</p>
<p>å°† <code>BeanPostProcessor</code> ä¸ä¹‹å‰çš„ <code>BeanFactoryPostProcessor</code> è¿›è¡Œå¯¹æ¯”åå‘ç°ï¼Œå°‘äº†ç¡¬ç¼–ç æ³¨å†Œçš„ä»£ç ï¼Œåªå¤„ç†äº†é…ç½®æ–‡ä»¶æ–¹å¼çš„æ³¨å†Œ <code>bean</code>ã€‚é€šè¿‡ä¹¦ä¸­é˜é‡Šï¼Œå¯¹å°‘äº†ç¡¬ç¼–ç çš„å¤„ç†æœ‰äº›ç†è§£ï¼š</p>
<blockquote>
<p>å¯¹äº BeanFactoryPostProcessor çš„å¤„ç†ï¼Œåœ¨ä¸€ä¸ªæ–¹æ³•å†…å®ç°äº†æ³¨å†Œå’Œå®ç°ï¼Œæ‰€ä»¥éœ€è¦è½½å…¥é…ç½®ä¸­çš„å®šä¹‰ï¼Œå¹¶è¿›è¡Œæ¿€æ´»ï¼›è€Œå¯¹äº BeanPostProcessor å¹¶ä¸éœ€è¦é©¬ä¸Šè°ƒç”¨ï¼Œ<strong>ç¡¬ç¼–ç çš„æ–¹å¼å®ç°çš„åŠŸèƒ½æ˜¯å°†åå¤„ç†å™¨æå–å¹¶è°ƒç”¨ï¼Œå¯¹äº BeanPostProcessorï¼Œæ³¨å†Œé˜¶æ®µä¸éœ€è¦è°ƒç”¨ï¼Œæ‰€ä»¥æ²¡æœ‰è€ƒè™‘å¤„ç†ç¡¬ç¼–ç </strong>ï¼Œåœ¨è¿™é‡Œåªéœ€è¦å°†é…ç½®æ–‡ä»¶çš„ BeanPostProcessor æå–å‡ºæ¥å¹¶æ³¨å†Œè¿›å…¥ beanFactory å°±å¯ä»¥äº†ã€‚</p>
</blockquote>
<p>è€Œä¸”æˆ‘åœ¨æµ‹è¯•è¿‡ç¨‹ï¼Œæƒ³åœ¨åº”ç”¨ä»£ç ä¸­è¿›è¡Œç¡¬ç¼–ç æ³¨å†Œï¼Œ<strong>å‘ç°ç”±äº <code>ClassPathXmlApplicationContext</code> æœ€åä¸€ä¸ªæ–¹æ³•æ˜¯å®ä¾‹åŒ–éå»¶è¿ŸåŠ è½½çš„ <code>bean</code>ï¼Œåœ¨ä¸Šä¸‹æ–‡åˆ›å»ºå¥½æ—¶ï¼Œ<code>BeanPostProcessor</code> å°±å·²ç»æ‰§è¡Œå®Œæˆäº†ï¼Œäºæ˜¯ç¡¬ç¼–ç æ³¨å†Œçš„åå¤„ç†å™¨æ— æ³•æ‰§è¡Œ</strong>ï¼Œåªèƒ½é€šè¿‡è®¾å®šå»¶è¿ŸåŠ è½½æˆ–è€…åœ¨é…ç½®æ–‡ä»¶é…ç½®ä¸­è¿›è¡Œæ³¨å†Œï¼Œæˆ–è€…å…¶å®ƒ BeanFactory èƒ½æ”¯æŒç¡¬ç¼–ç ã€‚</p>
<p>å‰©ä¸‹é¡ºåº <code>Order</code> ç±»å‹çš„åå¤„ç†å™¨æ³¨å†Œ <code>BeanFactoryPostProcessor</code> ç±»ä¼¼å°±ä¸é‡å¤å¤šè®²è§£äº†ï¼Œè¿™æ®µä»£ç çš„é€»è¾‘æŒºæ¸…æ™°çš„~</p>
<hr>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>ç»“æŸä¸¤ä¸ªæ‰©å±•åŠŸèƒ½ï¼Œ<code>BeanFactoryPostProcessor</code> å’Œ <code>BeanPostProcessor</code> çš„å­¦ä¹ ä½¿ç”¨åï¼Œè¿˜æœ‰å…¶å®ƒçš„æ‰©å±•åŠŸèƒ½æ²¡å­¦ä¹ åˆ°ï¼Œ<strong>åœ¨ä¸€å¼€å§‹åŸºç¡€æœºæ„ç¯‡å°±æåˆ°å‰©ä¸‹çš„æ–¹æ³•ï¼š</strong></p>
<p><img src="http://img.sevenyuan.cn/context_extend_method_list.png" alt=""></p>
<p>è¿™è¿™äº›æ‰©å±•åŠŸèƒ½ä¸­ï¼Œä¸ªäººæ„Ÿè§‰<strong>äº‹ä»¶ä¼ æ’­å™¨ã€ç›‘å¬å™¨å’Œå‘é€å¹¿æ’­äº‹ä»¶</strong>è¿™ä¸‰ä¸ªä¼šç”¨å¾—æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥ä¸‹é¢çš„å†…å®¹ä¼šèŠ±æ¯”è¾ƒå¤§ç¯‡å¹…è®²è¿™ä¸‰ä¸ªæ‰©å±•ã€‚</p>
<hr>
<h1 id="åˆå§‹åŒ–æ¶ˆæ¯èµ„æº"><a href="#åˆå§‹åŒ–æ¶ˆæ¯èµ„æº" class="headerlink" title="åˆå§‹åŒ–æ¶ˆæ¯èµ„æº"></a>åˆå§‹åŒ–æ¶ˆæ¯èµ„æº</h1><p>æ ¹æ®ä¹¦ä¸­çš„å†…å®¹ä»‹ç»ï¼Œè¿™ä¸ªæ¶ˆæ¯èµ„æº <code>messageSource</code> æ˜¯è·Ÿ <code>Spring</code> å›½é™…åŒ–ç›¸å…³ã€‚</p>
<p>ä¾‹å¦‚ä¸­ç¾ä¹‹é—´çš„ä¸­è‹±æ–‡å·®åˆ«ï¼Œåœ¨ä¸åŒåœ°åŒºæ˜¾ç¤ºä¸åŒçš„èµ„æºã€‚å¯¹äºæœ‰å›½é™…åŒ–éœ€æ±‚çš„ç³»ç»Ÿï¼Œè¦ä¸ºæ¯ç§æä¾›ä¸€å¥—ç›¸åº”çš„<strong>èµ„æºæ–‡ä»¶</strong>ï¼Œå¹¶ä»¥è§„èŒƒåŒ–å‘½åçš„å½¢å¼ä¿å­˜åœ¨ç‰¹å®šçš„ç›®å½•ä¸­ï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨æ ¹æ®å®¢æˆ·ç«¯çš„è¯­è¨€æˆ–è€…é…ç½®é€‰æ‹©åˆé€‚çš„èµ„æºæ–‡ä»¶ã€‚</p>
<p>ä¸¾ä¸ªğŸŒ°ï¼š<br>å®šä¹‰äº†ä¸¤ä¸ªèµ„æºæ–‡ä»¶ï¼Œç®€å•é…ç½®å¦‚ä¸‹</p>
<ul>
<li>ä¸­æ–‡åœ°åŒºï¼š test=æµ‹è¯•</li>
<li>è‹±æ–‡åœ°åŒºï¼š test=test</li>
</ul>
<p><strong>æ‰€ä»¥å¯ä»¥é€šè¿‡ <code>Applicationcontext.getMessage()</code> æ–¹æ³•è®¿é—®å›½é™…åŒ–ä¿¡æ¯ï¼Œåœ¨ä¸åŒçš„ç¯å¢ƒä¸­è·å–å¯¹åº”çš„æ•°æ®ã€‚</strong></p>
<p>ç”±äºä¸ªäººæ„Ÿè§‰è¿™ç§é…ç½®ç›¸å…³çš„ï¼Œå¯ä»¥é€šè¿‡ <code>profile</code> åˆ‡æ¢æ¥å®ç°ï¼Œæ‰€ä»¥æ²¡æœ‰å»ç»†çœ‹å’Œä½¿ç”¨ï¼Œå…·ä½“å®ç°å’Œä½¿ç”¨è¯·æ„Ÿå…´è¶£çš„åŒå­¦ä»¬æ·±å…¥äº†è§£å§ã€‚</p>
<hr>
<h1 id="äº‹ä»¶ç›‘å¬"><a href="#äº‹ä»¶ç›‘å¬" class="headerlink" title="äº‹ä»¶ç›‘å¬"></a>äº‹ä»¶ç›‘å¬</h1><p>äº‹ä»¶ä¼ æ’­å™¨çš„ä½¿ç”¨å¾ˆåƒæˆ‘ä»¬è®¾è®¡æ¨¡å¼ä¸­çš„<strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼Œè¢«è§‚å¯Ÿè€…å˜åŠ¨åé€šçŸ¥è§‚å¯Ÿè€…è¿›è¡Œç›¸åº”çš„é€»è¾‘å¤„ç†ã€‚</p>
<p>åœ¨äº†è§£ <code>Spring</code> å¦‚ä½•åˆå§‹åŒ–äº‹ä»¶ä¼ æ’­å™¨ä¹‹å‰ï¼Œæ¥çœ‹ä¸‹ <code>Spring</code> ç›‘å¬çš„ç®€å•ç”¨æ³•ã€‚</p>
<h2 id="å®šä¹‰ç›‘å¬äº‹ä»¶-Event"><a href="#å®šä¹‰ç›‘å¬äº‹ä»¶-Event" class="headerlink" title="å®šä¹‰ç›‘å¬äº‹ä»¶ Event"></a>å®šä¹‰ç›‘å¬äº‹ä»¶ Event</h2><p>æ–°å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿äº <code>ApplicationEvent</code>ï¼Œå¹¶ä¸”éœ€è¦åœ¨æ„é€ æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° <code>supre(source)</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarEvent</span> <span class="keyword">extends</span> <span class="title">ApplicationEvent</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line"><span class="comment">	 * è‡ªå®šä¹‰ä¸€ä¸ªæ¶ˆæ¯</span></div><div class="line"><span class="comment">	 */</span></div><div class="line">	<span class="keyword">private</span> String msg;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">CarEvent</span><span class="params">(Object source)</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>(source);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">CarEvent</span><span class="params">(Object source, String msg)</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>(source);</div><div class="line">		<span class="keyword">this</span>.msg = msg;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="å®šä¹‰ç›‘å¬å™¨-Listener"><a href="#å®šä¹‰ç›‘å¬å™¨-Listener" class="headerlink" title="å®šä¹‰ç›‘å¬å™¨ Listener"></a>å®šä¹‰ç›‘å¬å™¨ Listener</h2><p>æ–°å»ºä¸€ä¸ªç±»ï¼Œå¼•ç”¨ <code>ApplicationListener</code> æ¥å£ï¼Œç„¶åé‡è½½ <code>onApplicationEvent</code> æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarEventListener</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span> </span>&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(ApplicationEvent event)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (event <span class="keyword">instanceof</span> CarEvent) &#123;</div><div class="line">			CarEvent carEvent = (CarEvent) event;</div><div class="line">			System.out.println(<span class="string">"source : "</span> + event.getSource() + <span class="string">",  custom message : "</span> + carEvent.getMsg());</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”±äº <code>Spring</code> çš„æ¶ˆæ¯ç›‘å¬å™¨ä¸åƒ <code>kafka</code> ç­‰ä¸»æµ <code>MQ</code> å¯ä»¥æŒ‡å®šå‘é€é˜Ÿåˆ—æˆ–è€…ç›‘å¬ä¸»é¢˜ï¼Œåªè¦å‘é€æ¶ˆæ¯åï¼Œæ‰€æœ‰æ³¨å†Œçš„ç›‘å¬å™¨éƒ½ä¼šæ”¶åˆ°æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥è¿™è¾¹åŠ äº†ä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœæ˜¯æˆ‘ä¸šåŠ¡ä¸Šéœ€è¦çš„æ¶ˆæ¯ï¼Œæ‰ä¼šè¿›è¡Œå¤„ç†ã€‚</p>
<hr>
<h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"testListener"</span> <span class="attr">class</span>=<span class="string">"context.event.CarEventListener"</span>/&gt;</span></div></pre></td></tr></table></figure>
<p>å°†åˆšæ‰å†™çš„ç›‘å¬å™¨æ³¨å†Œåˆ° <code>Spring</code> å®¹å™¨ä¸­</p>
<hr>
<h2 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EventBootstrap</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"factory.bean/bean-post-processor.xml"</span>);</div><div class="line">		<span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¥æºï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è‡ªå®šä¹‰</span></div><div class="line">		CarEvent carEvent = <span class="keyword">new</span> CarEvent(<span class="string">"hello"</span>,  <span class="string">"world"</span>);</div><div class="line">		context.publishEvent(carEvent);</div><div class="line">		<span class="comment">// æ¶ˆæ¯å‘é€ä¹‹åï¼Œæ‰“å°ä»¥ä¸‹å†…å®¹</span></div><div class="line">		<span class="comment">// source : hello,  custom message : world</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”±äºåœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œäº†ç›‘å¬å™¨ï¼Œç„¶ååœ¨å¯åŠ¨ä»£ç æ±‡æ€»åˆå§‹åŒ–äº†ç›‘å¬äº‹ä»¶ï¼Œæœ€ç»ˆé€šè¿‡ <code>context</code> å‘é€æ¶ˆæ¯ï¼Œå‘ç°è¾“å‡ºç»“æœä¸é¢„æƒ³çš„ä¸€è‡´ã€‚</p>
<p>è¿™ç§è§‚å¯Ÿè€…æ¨¡å¼å®ç°å¾ˆç»å…¸ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œä¸‹é¢æ¥ç»“åˆæºç åˆ†æä¸€ä¸‹ <code>Spring</code> æ˜¯å¦‚ä½•å®ç°æ¶ˆæ¯ç›‘å¬çš„åŠŸèƒ½ã€‚</p>
<hr>
<h2 id="æ¶ˆæ¯ç›‘å¬ä»£ç åˆ†æ"><a href="#æ¶ˆæ¯ç›‘å¬ä»£ç åˆ†æ" class="headerlink" title="æ¶ˆæ¯ç›‘å¬ä»£ç åˆ†æ"></a>æ¶ˆæ¯ç›‘å¬ä»£ç åˆ†æ</h2><p><strong>ä»æºç ä¸­åˆ†æï¼Œå‘ç°ä¸»è¦æ˜¯ä¸‹é¢ä¸‰ä¸ªæ­¥éª¤ï¼š</strong></p>
<h3 id="åˆå§‹åŒ–-ApplicationEvenMulticaster"><a href="#åˆå§‹åŒ–-ApplicationEvenMulticaster" class="headerlink" title="åˆå§‹åŒ– ApplicationEvenMulticaster"></a>åˆå§‹åŒ– ApplicationEvenMulticaster</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initApplicationEventMulticaster</span><span class="params">()</span> </span>&#123;</div><div class="line">	ConfigurableListableBeanFactory beanFactory = getBeanFactory();</div><div class="line">	<span class="comment">// å¦‚æœ‰æœ‰è‡ªå·±æ³¨å†Œclass Name æ˜¯ applicationEventMulticasterï¼Œä½¿ç”¨è‡ªå®šä¹‰å¹¿æ’­å™¨</span></div><div class="line">	<span class="keyword">if</span> (beanFactory.containsLocalBean(APPLICATION_EVENT_MULTICASTER_BEAN_NAME)) &#123;</div><div class="line">		<span class="keyword">this</span>.applicationEventMulticaster =</div><div class="line">				beanFactory.getBean(APPLICATION_EVENT_MULTICASTER_BEAN_NAME, ApplicationEventMulticaster.class);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> &#123;</div><div class="line">		<span class="comment">// æ²¡æœ‰è‡ªå®šä¹‰ï¼Œä½¿ç”¨é»˜è®¤çš„äº‹ä»¶å¹¿æ’­å™¨</span></div><div class="line">		<span class="keyword">this</span>.applicationEventMulticaster = <span class="keyword">new</span> SimpleApplicationEventMulticaster(beanFactory);</div><div class="line">		beanFactory.registerSingleton(APPLICATION_EVENT_MULTICASTER_BEAN_NAME, <span class="keyword">this</span>.applicationEventMulticaster);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>å¹¿æ’­å™¨çš„ä½œç”¨æ˜¯ç”¨æ¥å¹¿æ’­æ¶ˆæ¯</strong>ï¼Œåœ¨é»˜è®¤çš„å¹¿æ’­å™¨ <code>SimpleApplicationEventMulticaster</code> ç±»ä¸­å‘ç°äº†è¿™ä¸ªæ–¹æ³• <code>multicastEvent</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">multicastEvent</span><span class="params">(<span class="keyword">final</span> ApplicationEvent event, @Nullable ResolvableType eventType)</span> </span>&#123;</div><div class="line">	ResolvableType type = (eventType != <span class="keyword">null</span> ? eventType : resolveDefaultEventType(event));</div><div class="line">	Executor executor = getTaskExecutor();</div><div class="line">	<span class="comment">// éå†æ³¨å†Œçš„æ¶ˆæ¯ç›‘å¬å™¨</span></div><div class="line">	<span class="keyword">for</span> (ApplicationListener&lt;?&gt; listener : getApplicationListeners(event, type)) &#123;</div><div class="line">		<span class="keyword">if</span> (executor != <span class="keyword">null</span>) &#123;</div><div class="line">			executor.execute(() -&gt; invokeListener(listener, event));</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			invokeListener(listener, event);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å¹¿æ’­äº‹ä»¶æ—¶ï¼Œä¼šéå†æ‰€æœ‰æ³¨å†Œçš„ç›‘å¬å™¨è¿›è¡Œè°ƒç”¨ <code>invokeListener</code> æ–¹æ³•ï¼Œåº•å±‚è°ƒç”¨çš„æ˜¯ç›‘å¬å™¨é‡è½½çš„ <code>listener.onApplicationEvent(event)</code>ï¼Œæ‰€ä»¥å†æ¬¡å¼ºè°ƒä¸€æ¬¡ï¼Œå¦‚æœä½¿ç”¨ <code>Spring</code> è‡ªå¸¦çš„äº‹ä»¶ç›‘å¬ï¼Œè¯·åœ¨ä¸šåŠ¡å¤„ç†æ–¹åˆ¤æ–­äº‹ä»¶æ¥æºï¼Œé¿å…å¤„ç†é”™è¯¯ã€‚</strong></p>
<hr>
<h3 id="æ³¨å†Œç›‘å¬å™¨"><a href="#æ³¨å†Œç›‘å¬å™¨" class="headerlink" title="æ³¨å†Œç›‘å¬å™¨"></a>æ³¨å†Œç›‘å¬å™¨</h3><p>åœ¨ä¸Šä¸€æ­¥ä¸­ï¼Œå·²ç»åˆå§‹åŒ–å¥½äº†å¹¿æ’­å™¨ï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥æ¥çœ‹ä¸‹ï¼Œç›‘å¬å™¨çš„æ³¨å†Œæµç¨‹ï¼Œå…¥å£æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>org.springframework.context.support.AbstractApplicationContext#registerListeners</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">registerListeners</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="comment">// è¿™é‡Œæ˜¯ç¡¬ç¼–ç æ³¨å†Œçš„ç›‘å¬å™¨</span></div><div class="line">	<span class="keyword">for</span> (ApplicationListener&lt;?&gt; listener : getApplicationListeners()) &#123;</div><div class="line">		getApplicationEventMulticaster().addApplicationListener(listener);</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// ä¸è¦åœ¨è¿™é‡Œåˆå§‹åŒ– factoryBean : æˆ‘ä»¬éœ€è¦ä¿ç•™æ‰€æœ‰å¸¸è§„ bean æœªåˆå§‹åŒ–ï¼Œä»¥ä¾¿è®©åå¤„ç†ç¨‹åºåº”ç”¨äºå®ƒä»¬!</span></div><div class="line">	<span class="comment">// è¿™ä¸€æ­¥æ˜¯é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œçš„ç›‘å¬å™¨</span></div><div class="line">	String[] listenerBeanNames = getBeanNamesForType(ApplicationListener.class, <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line">	<span class="keyword">for</span> (String listenerBeanName : listenerBeanNames) &#123;</div><div class="line">		getApplicationEventMulticaster().addApplicationListenerBean(listenerBeanName);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// å‘å¸ƒæ—©æœŸçš„åº”ç”¨ç¨‹åºäº‹ä»¶ï¼Œç°åœ¨æˆ‘ä»¬ç»ˆäºæœ‰äº†ä¸€ä¸ªå¤šæ’­å™¨=-=</span></div><div class="line">	Set&lt;ApplicationEvent&gt; earlyEventsToProcess = <span class="keyword">this</span>.earlyApplicationEvents;</div><div class="line">	<span class="keyword">this</span>.earlyApplicationEvents = <span class="keyword">null</span>;</div><div class="line">	<span class="keyword">if</span> (earlyEventsToProcess != <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="keyword">for</span> (ApplicationEvent earlyEvent : earlyEventsToProcess) &#123;</div><div class="line">			getApplicationEventMulticaster().multicastEvent(earlyEvent);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸€ä¸ªæ–¹æ³•ä»£ç ä¸å¤šï¼Œä¹Ÿæ²¡å•¥åµŒå¥—åŠŸèƒ½ï¼ŒæŒ‰ç…§æ³¨é‡Šé¡ºåºå°†æµç¨‹æ¢³ç†äº†ä¸€éï¼Œå°†æˆ‘ä»¬æ³¨å†Œçš„ç›‘å¬å™¨åŠ å…¥åˆ° <code>applicationEventMulticaster</code> åˆ—è¡¨ä¸­ï¼Œç­‰å¾…ä¹‹åè°ƒç”¨ã€‚</p>
<hr>
<h3 id="publishEvent"><a href="#publishEvent" class="headerlink" title="publishEvent"></a>publishEvent</h3><p>å¹¿æ’­å™¨å’Œç›‘å¬å™¨éƒ½å‡†å¤‡å¥½äº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯å‘é€äº‹ä»¶ï¼Œé€šçŸ¥ç›‘å¬å™¨åšç›¸åº”çš„å¤„ç†ï¼š</p>
<blockquote>
<p>org.springframework.context.support.AbstractApplicationContext#publishEvent(java.lang.Object, org.springframework.core.ResolvableType)</p>
</blockquote>
<p>æ ¸å¿ƒæ˜¯è¿™è¡Œä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">getApplicationEventMulticaster().multicastEvent(applicationEvent, eventType);</div></pre></td></tr></table></figure>
<p>é€šè¿‡è·å–äº‹ä»¶å¹¿æ’­å™¨ï¼Œè°ƒç”¨ <code>multicastEvent</code> æ–¹æ³•ï¼Œè¿›è¡Œå¹¿æ’­äº‹ä»¶ï¼Œè¿™ä¸€æ­¥å‰é¢ä¹Ÿä»‹ç»è¿‡äº†ï¼Œä¸å†ç»†è¯´ã€‚</p>
<hr>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™æ¬¡å­¦ä¹ ï¼Œçœç•¥äº†ä¹¦ä¸­çš„ä¸€äº›å†…å®¹ï¼Œæœ‰å…³å±æ€§ç¼–è¾‘å™¨ã€<code>SPEL</code> è¯­è¨€å’Œåˆå§‹åŒ–éå»¶è¿ŸåŠ è½½ç­‰å†…å®¹ï¼Œè¯·æ„Ÿå…´è¶£çš„åŒå­¦ç»§ç»­æ·±å…¥äº†è§£~</p>
<p>æˆ‘ä»¬ä¹Ÿèƒ½ä» <code>Spring</code> æä¾›çš„è¿™äº›æ‰©å±•åŠŸèƒ½ä¸­å­¦ä¹ åˆ°ï¼Œé€šè¿‡é¢„ç•™åå¤„ç†å™¨ï¼Œå¯ä»¥åœ¨ <code>bean</code> å®ä¾‹åŒ–ä¹‹å‰ä¿®æ”¹é…ç½®ä¿¡æ¯ï¼Œæˆ–è€…åšå…¶ä»–çš„è‡ªå®šä¹‰æ“ä½œï¼›é€šè¿‡å¹¿æ’­äº‹ä»¶ï¼Œå®šä¹‰äº‹ä»¶å’Œç›‘å¬å™¨ï¼Œåœ¨ç›‘å¬å™¨ä¸­å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œç”±äºä¸æ˜¯ç›´æ¥è°ƒç”¨ç›‘å¬å™¨ï¼Œè€Œæ˜¯é€šè¿‡äº‹ä»¶å¹¿æ’­å™¨è¿›è¡Œä¸­è½¬ï¼Œè¾¾åˆ°äº†ä»£ç è§£è€¦çš„æ•ˆæœã€‚</p>
<p><strong>æ‰€ä»¥åœ¨ä¹‹åçš„ä»£ç è®¾è®¡å’Œç¼–å†™ä¸­ï¼Œåœ¨æ•´ä½“è®¾è®¡ä¸Šï¼Œæœ‰å¿…è¦çš„è¯ï¼Œè€ƒè™‘åœ¨æ›´é«˜çš„æŠ½è±¡å±‚è¦é¢„ç•™æ‰©å±•åŠŸèƒ½ï¼Œç„¶åè®©å­ç±»é‡è½½æˆ–è€…å®ç°ï¼Œå®ç°æ‰©å±•çš„åŠŸèƒ½ã€‚</strong></p>
<hr>
<p><strong>ç”±äºä¸ªäººæŠ€æœ¯æœ‰é™ï¼Œå¦‚æœæœ‰ç†è§£ä¸åˆ°ä½æˆ–è€…é”™è¯¯çš„åœ°æ–¹ï¼Œè¯·ç•™ä¸‹è¯„è®ºï¼Œæˆ‘ä¼šæ ¹æ®æœ‹å‹ä»¬çš„å»ºè®®è¿›è¡Œä¿®æ­£</strong></p>
<p><strong>ä»£ç å’Œæ³¨é‡Šéƒ½åœ¨é‡Œé¢ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥ä¸‹è½½æˆ‘ä¸Šä¼ çš„ä»£ç ï¼Œäº²æµ‹å¯è¿è¡Œ~</strong></p>
<p><a href="https://gitee.com/vip-augus/spring-analysis-note.git" target="_blank" rel="noopener">Gitee åœ°å€ï¼šhttps://gitee.com/vip-augus/spring-analysis-note.git</a></p>
<p><a href="https://github.com/Vip-Augus/spring-analysis-note" target="_blank" rel="noopener">Github åœ°å€ï¼šhttps://github.com/Vip-Augus/spring-analysis-note</a></p>
<hr>
<h1 id="ä¼ é€é—¨ï¼š"><a href="#ä¼ é€é—¨ï¼š" class="headerlink" title="ä¼ é€é—¨ï¼š"></a>ä¼ é€é—¨ï¼š</h1><ul>
<li><p><a href="https://vip-augus.github.io/2019/06/08/spring/2019-06-08-spring-analysis-note-env-prepared" target="_blank" rel="noopener">Spring æºç å­¦ä¹ -ç¯å¢ƒå‡†å¤‡</a></p>
</li>
<li><p><a href="https://vip-augus.github.io/2019/06/08/spring/2019-06-08-spring-analysis-note-1" target="_blank" rel="noopener">Spring æºç å­¦ä¹ (ä¸€)å®¹å™¨çš„åŸºç¡€ç»“æ„</a></p>
</li>
<li><p><a href="https://vip-augus.github.io/2019/06/14/spring/2019-06-14-spring-analysis-note-2" target="_blank" rel="noopener">Spring æºç å­¦ä¹ (äºŒ)é»˜è®¤æ ‡ç­¾è§£æ</a></p>
</li>
<li><p><a href="https://vip-augus.github.io/2019/06/16/spring/2019-06-16-spring-analysis-note-3" target="_blank" rel="noopener">Spring æºç å­¦ä¹ (ä¸‰)è‡ªå®šä¹‰æ ‡ç­¾</a></p>
</li>
<li><p><a href="https://vip-augus.github.io/2019/06/19/spring/2019-06-19-spring-analysis-note-4" target="_blank" rel="noopener">Spring æºç å­¦ä¹ (å››) bean çš„åŠ è½½</a></p>
</li>
<li><p><a href="https://vip-augus.github.io/2019/06/22/spring/2019-06-22-spring-analysis-note-5" target="_blank" rel="noopener">Spring æºç å­¦ä¹ (äº”)å¾ªç¯ä¾èµ–</a></p>
</li>
<li><p><a href="https://vip-augus.github.io/2019/06/22/spring/2019-06-22-spring-analysis-note-6" target="_blank" rel="noopener">Spring æºç å­¦ä¹ (å…­)æ‰©å±•åŠŸèƒ½ ä¸Šç¯‡</a></p>
</li>
<li><p><a href="https://vip-augus.github.io/2019/06/30/spring/2019-06-30-spring-analysis-note-7" target="_blank" rel="noopener">Spring æºç å­¦ä¹ (ä¸ƒ)æ‰©å±•åŠŸèƒ½ ä¸‹ç¯‡</a></p>
</li>
<li><p><a href="https://vip-augus.github.io/2019/07/17/spring/2019-07-17-spring-analysis-note-8" target="_blank" rel="noopener">Spring æºç å­¦ä¹ (å…«) AOP ä½¿ç”¨å’Œå®ç°åŸç†</a></p>
</li>
<li><p><a href="https://vip-augus.github.io/2019/07/18/spring/2019-07-18-spring-analysis-note-9" target="_blank" rel="noopener">Spring æºç å­¦ä¹ (ä¹) Transaction äº‹åŠ¡</a></p>
</li>
<li><p><a href="https://vip-augus.github.io/2019/07/21/spring/2019-07-21-spring-analysis-note-10" target="_blank" rel="noopener">Spring æºç å­¦ä¹ (å) Spring mvc</a></p>
</li>
</ul>
<hr>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol>
<li>Spring æºç æ·±åº¦è§£æ / éƒä½³ç¼–è‘—. â€“ åŒ—äº¬ : äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾</li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Spring/" rel="tag"># Spring</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/22/spring/2019-06-22-spring-analysis-note-6/" rel="next" title="Spring Spring æºç å­¦ä¹ (å…­)æ‰©å±•åŠŸèƒ½ ä¸Šç¯‡">
                <i class="fa fa-chevron-left"></i> Spring Spring æºç å­¦ä¹ (å…­)æ‰©å±•åŠŸèƒ½ ä¸Šç¯‡
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/07/17/spring/2019-07-17-spring-analysis-note-8/" rel="prev" title="Spring æºç å­¦ä¹ (å…«) AOP ä½¿ç”¨å’Œå®ç°åŸç†">
                Spring æºç å­¦ä¹ (å…«) AOP ä½¿ç”¨å’Œå®ç°åŸç† <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zNjEzNi8xMjY3MQ=="></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://img.sevenyuan.cn/%E5%B0%8F%E7%86%8A%E7%8C%AB.jpeg"
               alt="JingQ" />
          <p class="site-author-name" itemprop="name">JingQ</p>
           
              <p class="site-description motion-element" itemprop="description">åŠªåŠ›å­¦ä¹ </p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">95</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">28</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">22</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Vip-Augus" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.weibo.com/yjq41596" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                    
                      Weibo
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.douban.com/people/YeJingQi" target="_blank" title="Douban">
                  
                    <i class="fa fa-fw fa-anchor"></i>
                  
                    
                      Douban
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto://JingQBoom@gmail.com" target="_blank" title="E-Mail">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                    
                      E-Mail
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#å‰è¨€"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BeanPostProcessor"><span class="nav-number">2.</span> <span class="nav-text">BeanPostProcessor</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å¦‚ä½•ä½¿ç”¨"><span class="nav-number">2.1.</span> <span class="nav-text">å¦‚ä½•ä½¿ç”¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ–°å»ºä¸€ä¸ª-bean-åå¤„ç†å™¨"><span class="nav-number">2.1.1.</span> <span class="nav-text">æ–°å»ºä¸€ä¸ª bean åå¤„ç†å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ-bean-post-processor-xml"><span class="nav-number">2.1.2.</span> <span class="nav-text">åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ bean-post-processor.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¯åŠ¨ä»£ç å’Œæ‰“å°ç»“æœ"><span class="nav-number">2.1.3.</span> <span class="nav-text">å¯åŠ¨ä»£ç å’Œæ‰“å°ç»“æœ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ³¨å†Œ-BeanPostProcessor"><span class="nav-number">2.2.</span> <span class="nav-text">æ³¨å†Œ BeanPostProcessor</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å°ç»“"><span class="nav-number">2.3.</span> <span class="nav-text">å°ç»“</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åˆå§‹åŒ–æ¶ˆæ¯èµ„æº"><span class="nav-number">3.</span> <span class="nav-text">åˆå§‹åŒ–æ¶ˆæ¯èµ„æº</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#äº‹ä»¶ç›‘å¬"><span class="nav-number">4.</span> <span class="nav-text">äº‹ä»¶ç›‘å¬</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å®šä¹‰ç›‘å¬äº‹ä»¶-Event"><span class="nav-number">4.1.</span> <span class="nav-text">å®šä¹‰ç›‘å¬äº‹ä»¶ Event</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®šä¹‰ç›‘å¬å™¨-Listener"><span class="nav-number">4.2.</span> <span class="nav-text">å®šä¹‰ç›‘å¬å™¨ Listener</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é…ç½®æ–‡ä»¶"><span class="nav-number">4.3.</span> <span class="nav-text">é…ç½®æ–‡ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æµ‹è¯•ä»£ç "><span class="nav-number">4.4.</span> <span class="nav-text">æµ‹è¯•ä»£ç </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ¶ˆæ¯ç›‘å¬ä»£ç åˆ†æ"><span class="nav-number">4.5.</span> <span class="nav-text">æ¶ˆæ¯ç›‘å¬ä»£ç åˆ†æ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆå§‹åŒ–-ApplicationEvenMulticaster"><span class="nav-number">4.5.1.</span> <span class="nav-text">åˆå§‹åŒ– ApplicationEvenMulticaster</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ³¨å†Œç›‘å¬å™¨"><span class="nav-number">4.5.2.</span> <span class="nav-text">æ³¨å†Œç›‘å¬å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#publishEvent"><span class="nav-number">4.5.3.</span> <span class="nav-text">publishEvent</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ€»ç»“"><span class="nav-number">5.</span> <span class="nav-text">æ€»ç»“</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä¼ é€é—¨ï¼š"><span class="nav-number">6.</span> <span class="nav-text">ä¼ é€é—¨ï¼š</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å‚è€ƒèµ„æ–™"><span class="nav-number">7.</span> <span class="nav-text">å‚è€ƒèµ„æ–™</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-JingQ"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JingQ</span>
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  æœ¬ç«™è®¿å®¢æ•°:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<a href="http://www.beian.miit.gov.cn">æµ™ICPå¤‡17002280å·-1</a> 

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i> è®¿é—®äººæ•°
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> æ€»è®¿é—®é‡
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      æ¬¡
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  






  





  

  

  

  

  

  

  
</body>
</html>
